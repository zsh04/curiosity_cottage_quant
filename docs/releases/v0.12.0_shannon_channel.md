# v0.12.0: The Shannon Channel & The Rosetta Stone

**Date:** 2025-12-22
**Codename:** Shannon

## üöÄ Highlights

### üì° The Shannon Channel (Backtest Streaming)

A major upgrade to the simulation infrastructure. The `BacktestEngine` now streams real-time progress and equity curve updates via Redis (Dragonfly) to the Frontend, eliminating the need for polling or file-watching.

* **New Protocol:** `BacktestEngine` publishes `{"type": "progress", ...}` frames to `backtest:{run_id}`.
* **New API:**
  * `POST /api/backtest/spawn`: Spawns async simulations.
  * `WS /api/backtest/stream/{run_id}`: WebSocket endpoint for real-time telemetry.

### ü™® The Rosetta Stone (Protobufs)

We have introduced Protocol Buffers to strictly define the interface between the Core Engine and the "Brain" services (Chronos, FinBERT). This lays the groundwork for splitting the Brain into a high-performance gRPC microservice.

* **Definitions:** `protos/brain.proto` defines `ForecastRequest` and `SentimentRequest`.
* **Codegen:** `scripts/codegen.py` compiles these into Python bindings (`app/generated`).

### ‚ö° Batch Ingestion (QuestDB)

Optimized `BacktestDAL` to use QuestDB's Influx Line Protocol (ILP) for batch ingestion of equity curves, achieving sub-10ms latency for 1000+ data points.

## üõ†Ô∏è Technical Changes

* **Feature:** Implemented `BacktestController` in `app/api/routes/backtest.py`.
* **Feature:** Updated `BacktestEngine` to remove side-effects (matplotlib) and support streaming.
* **Refactor:** Removed legacy `ExecutionAgent` and `RiskAgent` remnants.
* **Docs:** Updated `TECHNICAL_REFERENCE.md` and `backtest-engine.md`.
* **Script:** Added `scripts/verify_backtest_api.py` for E2E verification.
* **Script:** Added `scripts/codegen.py` for Protobuf compilation.

## üêõ Fixes

* Fixed `ReasoningService` missing methods via Audit.
* Fixed Batch Ingestion performance in `QuestDBClient`.

## ‚è≠Ô∏è Next Steps

* Implement `BrainService` gRPC Server (Phase 30.2).
