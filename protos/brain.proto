syntax = "proto3";

service Brain {
  // Chronos: Time Series Forecasting
  rpc Forecast (ForecastRequest) returns (ForecastResponse);
  
  // FinBERT: Sentiment Analysis
  rpc AnalyzeSentiment (SentimentRequest) returns (SentimentResponse);
}

message ForecastRequest {
  string ticker = 1;
  repeated double prices = 2; // Historical context
  int32 horizon = 3;          // How many steps to predict
}

message ForecastResponse {
  // Decision Core
  string signal = 1;        // "BUY", "SELL", "NEUTRAL"
  double confidence = 2;    // 0.0 to 1.0
  string reasoning = 3;     // "Resonance: Neural and Memory align..."

  // Key Forecast Metrics
  double p10 = 4;
  double p50 = 5;
  double p90 = 6;
  double trend = 7;

  // Full Context (Serialized JSON)
  string chronos_json = 8;  // detailed neural outputs
  string raf_json = 9;      // memory analog details
  string meta_json = 10;    // relativity, etc.
  repeated double full_quantiles = 11; // Full spectrum of forecasted quantiles (0.1 to 0.9)
}

message SentimentRequest {
  repeated string headlines = 1;
}

message SentimentResponse {
  double sentiment_score = 1; // -1.0 to 1.0
  double confidence = 2;
}
