syntax = "proto3";

service Brain {
  // Chronos: Time Series Forecasting
  rpc Forecast (ForecastRequest) returns (ForecastResponse);
  
  // FinBERT: Sentiment Analysis
  rpc AnalyzeSentiment (SentimentRequest) returns (SentimentResponse);
}

message ForecastRequest {
  string ticker = 1;
  repeated double prices = 2; // Historical context
  int32 horizon = 3;          // How many steps to predict
}

message ForecastResponse {
  // 10 Quantile Arrays: [q05, q15, q25, q35, q45, q55, q65, q75, q85, q95]
  // We store them as a map or parallel arrays.
  map<string, QuantileData> forecasts = 1; // Key: Ticker
}

message QuantileData {
  // 10 Decile Centers [0.05, 0.15 ... 0.95]
  repeated float q_values = 1; // The price values
  repeated float q_labels = 2; // The percentiles (0.05, 0.15, etc)
}

message SentimentRequest {
  repeated string headlines = 1;
}

message SentimentResponse {
  double sentiment_score = 1; // -1.0 to 1.0
  double confidence = 2;
}
